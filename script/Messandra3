const axios = require("axios");

const responseOpeners = ["𝗔𝗿𝗶𝗮 𝗔𝗜"];

const config = {
  name: "aria",
  aliases: ["ariaai"],
  description: "Interact with Aria AI",
  usage: "<query>",
  cooldown: 0,
  permissions: [0],
  credits: "Keijo"
};

async function onStart({ message, args, event }) {
  const query = args.join(" ").trim();

  if (!query) {
    return message.reply(
      "🔷 I'm Aria AI, your digital companion! I'm here to assist, inform, and chat. What can I help you with today? Created by Hara Amihan"
    );
  }

  try {
    const response = await axios.get(
      `https://betadash-api-swordslush-production.up.railway.app/Aria?ask=${encodeURIComponent(query)}&userid=${encodeURIComponent(event.senderID)}&stream=`
    );

    const ariaReply = response.data?.response || response.data || "❌ Aria AI didn't respond. Please try again later.";
    return message.reply(`${responseOpeners[0]}: ${ariaReply}`);
  } catch (err) {
    console.error("Aria AI Error:", err);
    return message.reply("⚠️ Error interacting with Aria AI. Please try again later.");
  }
}

module.exports = {
  config,
  onStart
};
